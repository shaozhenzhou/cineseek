# CineSeek ğŸ¬

<div align="center">

**åŸºäº Wikidata/Wikipedia çš„æ™ºèƒ½ç”µå½±ä¿¡æ¯æœç´¢å·¥å…·**

æ”¯æŒ CLI Â· Web API Â· ç²¾ç¾ Web ç•Œé¢

[![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.115+-green.svg)](https://fastapi.tiangolo.com/)
[![Vue](https://img.shields.io/badge/Vue-3.x-brightgreen.svg)](https://vuejs.org/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

</div>

---

## âœ¨ ç‰¹æ€§

- ğŸ¯ **æ™ºèƒ½è§£æ**ï¼šè‡ªåŠ¨è¯†åˆ«ç”µå½±æ–‡ä»¶åï¼Œæ”¯æŒå„ç§å¤æ‚æ ¼å¼
- ğŸŒ **å…¨çƒæ•°æ®**ï¼šåŸºäº Wikidata/Wikipediaï¼Œæ•°æ®ä¸°å¯Œä¸”å…è´¹
- ğŸ‡¨ğŸ‡³ **ç®€ä½“ä¸­æ–‡ä¼˜å…ˆ**ï¼šè‡ªåŠ¨ç¹ç®€è½¬æ¢ï¼Œä¼˜å…ˆæ˜¾ç¤ºç®€ä½“ä¸­æ–‡å†…å®¹
- ğŸ–¼ï¸ **æµ·æŠ¥è·å–**ï¼šä¼˜å…ˆä½¿ç”¨ä¸­æ–‡ç»´åŸºç™¾ç§‘æµ·æŠ¥ï¼Œå¤šé‡å¤‡ç”¨æ–¹æ¡ˆ
- ğŸ” **å¹´ä»½è¿‡æ»¤**ï¼šæœç´¢æ—¶è‡ªåŠ¨è¿‡æ»¤å¹´ä»½ä¸åŒ¹é…çš„ç”µå½±
- ğŸ“ **æœç´¢å†å²**ï¼šå‰ç«¯è‡ªåŠ¨ä¿å­˜æœç´¢å†å²ï¼Œæ”¯æŒä¸€é”®æ¸…é™¤
- ğŸš€ **å¤šç§ä½¿ç”¨æ–¹å¼**ï¼šCLI å‘½ä»¤è¡Œã€RESTful APIã€Web ç•Œé¢

---

## ğŸ“š ç›®å½•

- [ç‰¹æ€§](#-ç‰¹æ€§)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ä½¿ç”¨æ–¹æ³•](#-ä½¿ç”¨æ–¹æ³•)
- [API æ–‡æ¡£](#-api-æ–‡æ¡£)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [åŠŸèƒ½è¯¦æƒ…](#-åŠŸèƒ½è¯¦æƒ…)
- [å¼€å‘è¯´æ˜](#-å¼€å‘è¯´æ˜)
- [è®¸å¯åè®®](#-è®¸å¯åè®®)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Python 3.9+
- Node.js 16+
- [uv](https://github.com/astral-sh/uv) (æ¨èç”¨äº Python ä¾èµ–ç®¡ç†)

### 1ï¸âƒ£ å¯åŠ¨åç«¯

```powershell
cd backend

# å®‰è£…ä¾èµ–
uv sync

# å¯åŠ¨ API æœåŠ¡ (é»˜è®¤ http://127.0.0.1:8000)
uv run uvicorn cineseek.api:app --reload --host 127.0.0.1 --port 8000
```

### 2ï¸âƒ£ å¯åŠ¨å‰ç«¯

```powershell
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (é»˜è®¤ http://127.0.0.1:5173)
npm run dev
```

### 3ï¸âƒ£ è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š[http://127.0.0.1:5173](http://127.0.0.1:5173)

---

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### CLI å‘½ä»¤è¡Œ

```bash
cd backend

# æœç´¢ç”µå½±
uv run cineseek search "å˜å½¢é‡‘åˆ³2007"

# å¤æ‚æ–‡ä»¶åè§£æ
uv run cineseek search "White.House.Down.2013.1080p.BluRay.DTS-HD.MA.5.1.x264-PublicHD"

# ä¸­æ–‡æ–‡ä»¶å
uv run cineseek search "æˆ‘æ˜¯ä¼ å¥‡(è“å…‰å›½è‹±åŒéŸ³è½¨).I.Am.Legend.2007"
```

### Web ç•Œé¢

1. å¯åŠ¨åç«¯å’Œå‰ç«¯æœåŠ¡
2. æ‰“å¼€æµè§ˆå™¨è®¿é—® `http://127.0.0.1:5173`
3. åœ¨æœç´¢æ¡†è¾“å…¥ç”µå½±åç§°æˆ–æ–‡ä»¶å
4. æŸ¥çœ‹ç”µå½±ä¿¡æ¯ã€æµ·æŠ¥ã€ç»´åŸºç™¾ç§‘é“¾æ¥ç­‰

### æ”¯æŒçš„æœç´¢æ ¼å¼

- **ç®€å•åç§°**ï¼š`å˜å½¢é‡‘åˆ™`
- **åç§°+å¹´ä»½**ï¼š`å˜å½¢é‡‘åˆ³2007`ã€`å˜å½¢é‡‘åˆ™ 2007`ã€`å˜å½¢é‡‘åˆ™(2007)`
- **å¤æ‚æ–‡ä»¶å**ï¼š`Transformers.2007.1080p.BluRay.x264`
- **ä¸­è‹±æ··åˆ**ï¼š`å˜å½¢é‡‘åˆ™.Transformers.2007.1080p`

---

## ğŸ“¡ API æ–‡æ¡£

### 1. å‰ç«¯ä¸“ç”¨æ¥å£

**POST** `/api/search`

è¿”å›åŒ…å«æµ·æŠ¥ã€ç»´åŸºç™¾ç§‘é“¾æ¥ç­‰æ‰©å±•ä¿¡æ¯çš„å¤šä¸ªç»“æœã€‚

**è¯·æ±‚ä½“**ï¼š
```json
{
  "query": "å˜å½¢é‡‘åˆ³2007"
}
```

**å“åº”ç¤ºä¾‹**ï¼š
```json
[
  {
    "wikidata_id": "Q171453",
    "title_cn": "å˜å½¢é‡‘åˆ™",
    "title_en": "Transformers",
    "year": 2007,
    "display_title": "å˜å½¢é‡‘åˆ™ Transformers (2007)",
    "genres": ["åŠ¨ä½œç‰‡", "ç§‘å¹»ç”µå½±"],
    "countries": ["ç¾å›½"],
    "poster_url": "https://upload.wikimedia.org/wikipedia/zh/6/6d/Transformer_2017.jpg",
    "wikipedia_links": {
      "zh": "https://zh.wikipedia.org/wiki/è®Šå½¢é‡‘å‰©_(2007å¹´é›»å½±)",
      "en": "https://en.wikipedia.org/wiki/Transformers_(film)"
    }
  }
]
```

### 2. Douban å…¼å®¹æ¥å£

**GET** `/search?keyword=<ç”µå½±å>`

è¿”å›å•ä¸ªç»“æœï¼Œæ ¼å¼å…¼å®¹ douban.pyã€‚

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "fullname": "å˜å½¢é‡‘åˆ™ Transformers",
  "name": "å˜å½¢é‡‘åˆ™",
  "originalName": "Transformers",
  "year": 2007,
  "genre": "åŠ¨ä½œç‰‡ / ç§‘å¹»ç”µå½±",
  "country": "ç¾å›½",
  "alias": ""
}
```

### 3. å¥åº·æ£€æŸ¥

**GET** `/api/health`

```json
{ "ok": true }
```

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯

- **Python 3.9+**
- **FastAPI** - ç°ä»£åŒ–çš„ Web æ¡†æ¶
- **Typer** - CLI å·¥å…·
- **httpx** - å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
- **Pydantic** - æ•°æ®éªŒè¯
- **guessit** - ç”µå½±æ–‡ä»¶åè§£æ
- **opencc-python-reimplemented** - ç¹ç®€ä¸­æ–‡è½¬æ¢
- **uv** - å¿«é€Ÿ Python åŒ…ç®¡ç†å™¨

### å‰ç«¯

- **Vue 3** - æ¸è¿›å¼ JavaScript æ¡†æ¶
- **Vite** - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- **localStorage** - æœç´¢å†å²æŒä¹…åŒ–

### æ•°æ®æº

- **Wikidata SPARQL** - ç»“æ„åŒ–ç”µå½±æ•°æ®
- **Wikipedia REST API** - æµ·æŠ¥å’Œæ‘˜è¦
- **Wikipedia pageimages API** - å¤‡ç”¨æµ·æŠ¥è·å–

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
CineSeek/
â”œâ”€â”€ backend/              # Python åç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ cineseek/
â”‚   â”‚       â”œâ”€â”€ __init__.py
â”‚   â”‚       â”œâ”€â”€ api.py          # FastAPI è·¯ç”±
â”‚   â”‚       â”œâ”€â”€ cli.py          # Typer CLI
â”‚   â”‚       â”œâ”€â”€ models.py       # Pydantic æ¨¡å‹
â”‚   â”‚       â”œâ”€â”€ parser.py       # æ–‡ä»¶åè§£æå™¨
â”‚   â”‚       â””â”€â”€ providers/
â”‚   â”‚           â”œâ”€â”€ __init__.py
â”‚   â”‚           â””â”€â”€ wikidata.py # Wikidata æœç´¢
â”‚   â”œâ”€â”€ pyproject.toml   # é¡¹ç›®é…ç½®
â”‚   â””â”€â”€ uv.lock          # ä¾èµ–é”å®š
â”‚
â”œâ”€â”€ frontend/            # Vue å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.vue      # ä¸»ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.js      # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ vite.config.js
â”‚
â””â”€â”€ README.md
```

---

## âš™ï¸ åŠŸèƒ½è¯¦æƒ…

### 1. æ™ºèƒ½æ–‡ä»¶åè§£æ

- ä½¿ç”¨ `guessit` åº“ä¼˜å…ˆè§£æ
- å†…ç½®å¯å‘å¼è§„åˆ™ä½œä¸ºå¤‡ç”¨
- æ”¯æŒä¸­è‹±æ–‡æ··åˆã€æ‹¬å·ã€ç´§å¯†è¿æ¥ç­‰å¤šç§æ ¼å¼
- è‡ªåŠ¨æå–ç”µå½±åå’Œå¹´ä»½

### 2. å¹´ä»½è¿‡æ»¤

- æœç´¢æ—¶å¦‚æœåŒ…å«å¹´ä»½ï¼Œè‡ªåŠ¨è¿‡æ»¤ä¸åŒ¹é…çš„ç»“æœ
- å…è®¸ Â±1 å¹´çš„è¯¯å·®ï¼ˆå¤„ç†æ•°æ®ä¸ä¸€è‡´ï¼‰
- æŒ‰å¹´ä»½åŒ¹é…åº¦æ’åºç»“æœ

### 3. ç¹ç®€è½¬æ¢

- è‡ªåŠ¨å°†ç¹ä½“ä¸­æ–‡è½¬æ¢ä¸ºç®€ä½“
- ä¼˜å…ˆä» Wikidata è·å–ç®€ä½“æ ‡ç­¾
- å¤‡ç”¨ OpenCC è¿›è¡Œæœ¬åœ°è½¬æ¢

### 4. æµ·æŠ¥è·å–ç­–ç•¥

ä¼˜å…ˆçº§é¡ºåºï¼š
1. ä¸­æ–‡ Wikipedia REST API
2. ä¸­æ–‡ Wikipedia pageimages API
3. è‹±æ–‡ Wikipedia REST API
4. è‹±æ–‡ Wikipedia pageimages API
5. Wikidata P18 å±æ€§

### 5. æœç´¢å†å²

- è‡ªåŠ¨ä¿å­˜æˆåŠŸçš„æœç´¢è®°å½•
- æœ€å¤šä¿å­˜ 10 æ¡
- è‡ªåŠ¨å»é‡ï¼Œæ–°æœç´¢ç½®é¡¶
- æ”¯æŒä¸€é”®æ¸…é™¤
- localStorage æŒä¹…åŒ–å­˜å‚¨

---

## ğŸ‘¨â€ğŸ’» å¼€å‘è¯´æ˜

### åç«¯å¼€å‘

```bash
cd backend

# å®‰è£…å¼€å‘ä¾èµ–
uv sync

# è¿è¡Œæµ‹è¯•
uv run pytest

# ä»£ç æ ¼å¼åŒ–
uv run ruff format .

# ä»£ç æ£€æŸ¥
uv run ruff check .
```

### å‰ç«¯å¼€å‘

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆç”Ÿäº§ç‰ˆæœ¬
npm run preview
```

### ç¯å¢ƒå˜é‡

å‰ç«¯ `.env` æ–‡ä»¶ï¼š
```env
VITE_API_BASE=http://127.0.0.1:8000
```

---

## ğŸ“ æ›´æ–°è®°å½•

### v0.2.0 (2025-01-01)

- âœ… æ–°å¢æœç´¢å†å²åŠŸèƒ½
- âœ… ä¼˜åŒ–æµ·æŠ¥è·å–ç­–ç•¥
- âœ… æ”¯æŒç¹ç®€ä¸­æ–‡è½¬æ¢
- âœ… æ·»åŠ å¹´ä»½è¿‡æ»¤åŠŸèƒ½
- âœ… ä¿®å¤æ–‡ä»¶åè§£æé—®é¢˜

### v0.1.0 (2024-12-01)

- âœ… åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… æ”¯æŒ CLIã€APIã€Web ç•Œé¢
- âœ… åŸºäº Wikidata/Wikipedia çš„ç”µå½±æœç´¢

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

---

## ğŸ’¬ FAQ

### Q: ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ TMDBï¼Ÿ

A: Wikidata/Wikipedia æ˜¯å¼€æ”¾ã€å…è´¹çš„æ•°æ®æºï¼Œä¸éœ€è¦ API Keyï¼Œæ›´é€‚åˆä¸ªäººé¡¹ç›®å’Œå­¦ä¹ ä½¿ç”¨ã€‚

### Q: æœç´¢ç»“æœä¸ºä»€ä¹ˆä¸å‡†ç¡®ï¼Ÿ

A: è¯·ç¡®ä¿è¾“å…¥çš„ç”µå½±åå°½é‡å®Œæ•´ï¼Œå¹¶åŒ…å«å¹´ä»½ã€‚å¦‚ï¼šâ€œå˜å½¢é‡‘åˆ³2007â€è€Œä¸æ˜¯åªè¾“å…¥â€œå˜å½¢é‡‘åˆ™â€ã€‚

### Q: æµ·æŠ¥ä¸ºä»€ä¹ˆæ˜¾ç¤ºä¸å‡ºæ¥ï¼Ÿ

A: éƒ¨åˆ†ç”µå½±åœ¨ Wikipedia ä¸Šå¯èƒ½æ²¡æœ‰æµ·æŠ¥å›¾ç‰‡ã€‚ç³»ç»Ÿä¼šæ˜¾ç¤ºâ€œNo Posterâ€å ä½å›¾ã€‚

### Q: æ”¯æŒå“ªäº›è¯­è¨€ï¼Ÿ

A: ç›®å‰ä¸»è¦æ”¯æŒä¸­æ–‡å’Œè‹±æ–‡ï¼Œä¼˜å…ˆæ˜¾ç¤ºç®€ä½“ä¸­æ–‡å†…å®¹ã€‚

---

## ğŸ’» è®¸å¯åè®®

MIT License - è¯¦è§ [LICENSE](LICENSE)

---

## â­ Star History

å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ æ”¯æŒä¸€ä¸‹ï¼

---

<div align="center">

**Made with â¤ï¸ by [shaozhenzhou](https://github.com/shaozhenzhou)**

</div>
